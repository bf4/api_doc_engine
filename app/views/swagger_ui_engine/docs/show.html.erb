<% content_for(:script) do %>
<script>
window.onload = function() {
  // Build a system
  const config = {
    url: "http://petstore.swagger.io/v2/swagger.json",
    dom_id: '#swagger-ui',
    presets: [
      SwaggerUIBundle.presets.apis,
      SwaggerUIStandalonePreset
    ],
    plugins: [
      SwaggerUIBundle.plugins.DownloadUrl
    ],
    layout: "StandaloneLayout"
  }

  // begin customizations
  config.url = "<%= @swagger_url %>";
  config.validatorUrl = <%= @validator_url %>;
  config.oauth2RedirectUrl = "<%= oauth2_docs_path %>";
  config.docExpansion = "<%= @doc_expansion %>";
  // config.jsonEditor = "<%= @json_editor %>"; // not implemented
  // l10n (translations) is not implemented.
  // config.defaultModelRendering = "<%= @model_rendering %>";
  // config.showRequestHeaders = "<%= @request_headers %>";
  config.displayOperationId = false;
  // end customizations

  const ui = SwaggerUIBundle(config);
  window.ui = ui

  // begin customizations
  ui.initOAuth({
    clientId: "<%= @oauth_client_id %>",
    clientSecret: "<%= @oauth_client_secret %>",
    realm: "<%= @oauth_realm %>",
    appName: "<%= @oauth_app_name %>",
    scopeSeparator: "<%= @oauth_scope_separator %>",
    additionalQueryStringParams: "<%= @oauth_query_string_params %>"
  });
  // end customizations
}
</script>
<% end %>

<% unless @single_doc_url %>
  <div class="swagger-ui-wrap">
    <a href="<%= docs_path %>" class="swagger-return-link" data-sw-translate>Back to the list</a>
  </div>
<% end %>
