<% content_for(:script) do %>
<script>
window.onload = function() {
  // Build a system
  const ui = SwaggerUIBundle({
    url: "http://petstore.swagger.io/v2/swagger.json",
    dom_id: '#swagger-ui',
    presets: [
      SwaggerUIBundle.presets.apis,
      SwaggerUIStandalonePreset
    ],
    plugins: [
      SwaggerUIBundle.plugins.DownloadUrl
    ],
    layout: "StandaloneLayout"
  })

  window.ui = ui

  ui.url = "<%= @swagger_url %>";
  ui.validatorUrl = <%= @validator_url %>;
  ui.oauth2RedirectUrl = "<%= oauth2_docs_path %>";
  ui.docExpansion = "<%= @doc_expansion %>";
  // ui.jsonEditor = "<%= @json_editor %>"; // not implemented
  // l10n (translations) is not implemented.
  // ui.defaultModelRendering = "<%= @model_rendering %>";
  // ui.showRequestHeaders = "<%= @request_headers %>";
  // ui.showOperationIds = false;
  ui.initOAuth({
    clientId: "<%= @oauth_client_id %>",
    clientSecret: "<%= @oauth_client_secret %>",
    realm: "<%= @oauth_realm %>",
    appName: "<%= @oauth_app_name %>",
    scopeSeparator: "<%= @oauth_scope_separator %>",
    additionalQueryStringParams: "<%= @oauth_query_string_params %>"
  });
}
</script>
<% end %>

<% unless @single_doc_url %>
  <div class="swagger-ui-wrap">
    <a href="<%= docs_path %>" class="swagger-return-link" data-sw-translate>Back to the list</a>
  </div>
<% end %>
